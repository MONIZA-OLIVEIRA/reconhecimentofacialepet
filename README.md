# <p align="center"> VISION - Reconhecimento de emo√ß√µes e ra√ßas de c√£es.



## ‚öôÔ∏è Vers√£o<a name="versao"></a>

Atualmente est√° dispon√≠vel a **Vers√£o 1.0** do presente projeto, disponibilizada em Outubro/2024.

## üìù Descri√ß√£o do Projeto:

Este projeto visa receber imagens dos usu√°rios e a partir dela analisar as emo√ß√µes detectadas. Tamb√©m verificar√° se h√° animais de estima√ß√£o na imagem e, caso afirmativo, identificar√° a ra√ßa, retornando dicas sobre o animal.

## üéØ Especifica√ß√µes do Projeto:

O projeto √© dividido em duas etapas principais:

##### Parte 1 - Detec√ß√£o de emo√ß√µes:

- O projeto come√ßa com a cria√ß√£o de uma API usando o framework Serverless que permite ao usu√°rio enviar uma imagem.
- Essa imagem √© verificada pelo rekoginition que analisa os rotulos encontrados.
- Ap√≥s verifica√ß√£o do rekoginition √© retornado a emo√ß√£o encontrada na imagem com maior confiabilidade.
- Caso tenha mais de uma face ele analisa e retorna os resultados separadamente.

##### Parte 2 - Emo√ß√µes + Pet:

- A segunda parte envolve a an√°lise da imagem e detectar as emo√ß√µes e se existe um pet na imagem utilizando rekoginition.
- Caso exista um pet verifica a ra√ßa do pet.
- Se identificar a ra√ßa gerar um texto via bedrock com dicas relacionadas aquela ra√ßa.
- As seguintes informa√ß√µes s√£o obrigat√≥rias: N√≠vel de energia e necessidades de exerc√≠cios, Temperamento e Comportamento, Cuidados e Necessidades, Problemas de Sa√∫de Comuns.
- Ap√≥s verifica√ß√£o do rekoginition √© retornado a emo√ß√£o encontrada na imagem com maior confiabilidade.
- Caso tenha mais de uma face ele analisa e retorna os resultados separadamente.
- Ao final √© retornado as faces e as dicas para o pet.

## ‚öôÔ∏è Tecnologias Utilizadas:
<p align="center">
  <a href="https://go-skill-icons.vercel.app/">
    <img src="https://go-skill-icons.vercel.app/api/icons?i=vscode,python,aws,git,github,postman" />
  </a>
</p>



 - **VSCode**:IDE escolhida para escrever, editar e depurar o c√≥digo do projeto.
 - **Python**: Linguagem de programa√ß√£o utilizada.
 - **Serverless/Lambda**: O projeto foi desenvolvido com o framework Serverless. O Lambda permite rodar o c√≥digo sem a necessidade de gerenciar servidores.
 - **AWS Cloud**: A AWS fornece os servi√ßos de computa√ß√£o, armazenamento, processamento de imagem, integrando-os em uma solu√ß√£o completa que facilita a implementa√ß√£o, com escalabilidade e sem a necessidade de gerenciar infraestrutura f√≠sica.
 - **AWS Rekoginition**: Para analisar as imagens e detectar rostos e pets encontrados nas imagens enviadas.
 - **AWS Bedrock**: Para implementa√ß√£o de IA e gera√ß√£o de texto relacionado a ra√ßa do pet.
 - **Amazon S3**: Utilizado para armazenar as imagens que ser√£o analisadas pela aplica√ß√£o.
 - **AWS IAM (Identity and Access Management)**: Gerencia as credenciais e permiss√µes de acesso aos servi√ßos AWS utilizados, garantindo que os componentes da aplica√ß√£o possam interagir de forma segura.
 - **Git e Github**: Para versionamento da aplica√ß√£o.
 - **Postman**: Para testar as rotas e funcionamento da aplica√ß√£o.

## üõ† Como Abrir e Executar Esse Projeto:

**1. Clone o reposit√≥rio**:

```
git clone --branch grupo-1 https://github.com/Compass-pb-aws-2024-JUNHO/sprint-8-pb-aws-junho.git
```
**2. Abra o reposit√≥rio clonado em uma IDE de sua escolha, neste projeto a IDE utilizada foi o Visual Studio Code (VSCode)**:

**3. Recomendamos o uso de um ambiente virtual para que n√£o aja conflito de vers√µes**:
```
python -m venv venv

.\venv\Scripts\activate

```
**4. Para saber se o acesso ao ambiente virtual foi bem sucedido, o prefixo venv dever√° estar presente no caminho do projeto do seu terminal, exemplo**:
```
(venv) PS C:\Users\usu√°rio\sprint-8-pb-aws-junho>
```
**5. No terminal, instale o framework Serverless atrav√©s do comando**:
```
npm install -g serverless
```
**6. Ap√≥s a instala√ß√£o do framework do projeto, configure suas credenciais AWS**:

##### Op√ß√£o 1 - Via AWS CLI (Op√ß√£o que recomendamos):

Instale a AWS CLI e configure suas credenciais com:

```
aws configure
```
Voc√™ ser√° solicitado a fornecer:

- AWS Access Key ID: Sua chave de acesso.<br>
- AWS Secret Access Key: Sua chave secreta.<br>
- Default region name: Por exemplo, us-east-1 (Escolha a regi√£o que voc√™ est√° utilizando).<br>
- Default output format: Pode ser json.

**7. Instale as depend√™ncias**:
```
npm install
pip install -r requirements.txt:
```

**8. Adicione as Vari√°veis de Ambiente**:

Crie um arquivo `.env` no diret√≥rio raiz com o ID do modelo do Amazon Bedrock, dessa maneira:
- `MODEL_ID`

**9. Fa√ßa o deploy da aplica√ß√£o no Serverless Framework**:

Agora que tudo est√° configurado, fa√ßa o deploy da aplica√ß√£o para a AWS:

```
task deploy
```

##### Esse comando ir√°:

- Configurar o API Gateway.<br>
- Configurar outras integra√ß√µes AWS necess√°rias.


**10. Verifique os endpoints gerados. Esses endpoints s√£o URLs para as fun√ß√µes Lambda. Use-os para fazer requisi√ß√µes √† API, seja via navegador, Postman, ou outra ferramenta**:

endpoints:
```
  Deploying vision to stage dev (us-east-1)

Service deployed to stack vision-dev (85s)

endpoints:
  GET - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/
  GET - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v1
  GET - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v2
  POST - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v1/vision
  POST - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v2/vision
functions:
  health: vision-dev-health (25 MB)
  v1Description: vision-dev-v1Description (25 MB)
  v2Description: vision-dev-v2Description (25 MB)
  detectEmotion: vision-dev-detectEmotion (25 MB)
  detectPetAndEmotion: vision-dev-detectPetAndEmotion¬†(25¬†MB)
```

**11. Teste a API localmente**:

```
serverless invoke local --function v1Description
```
Usando serverless-offline:
```
task run
```
Usando serverless-offline e nodemon com reload autom√°tico:
```
npx nodemon 
```
##  Testando o VISION :

1. **Fa√ßa o upload da imagem para a bucket**:

    Selecione a imagem e fa√ßa seu envio para a bucket configurada.<br>

2. **Execute o deploy da aplica√ß√£o**:

    Execute o deploy da aplica√ß√£o, ap√≥s validar o deploy acesse via POSTMAN.<br>

3. **Digite as informa√ß√µes da imagem**:

    Digite as informa√ß√µes da bucket e o nome da imagem salva.<br>

Exemplo:
```json
{
  "bucket": "myphotosmo",
  "imageName": "pugs.jpg"
}
```
4. **Poss√≠veis retornos ap√≥s a an√°lise da imagem**:

Nulo:
```json
{
    "url_to_image": "https://myphotosmo.s3.amazonaws.com/2dogs.jpg",
    "created_image": "14-10-2024 09:36:19",
    "faces": [
        {
            "position": {
                "Height": null,
                "Left": null,
                "Top": null,
                "Width": null
            },
            "classified_emotion": null,
            "classified_emotion_confidence": null
 ¬†¬†¬†¬†¬†¬†¬†}
¬†¬†¬†¬†]
}
```
Emo√ß√£o:
```json
{
    "url_to_image": "https://myphotosmo.s3.amazonaws.com/triste.jpg",
    "created_image": "14-10-2024 08:54:35",
    "faces": [
        {
            "position": {
                "Height": 0.4149770438671112,
                "Left": 0.4800688624382019,
                "Top": 0.24941901862621307,
                "Width": 0.1959000676870346
            },
            "classified_emotion": "SAD",
            "classified_emotion_confidence": 93.24629974365234
 ¬†¬†¬†¬†¬†¬†¬†}
¬†¬†¬†¬†]
}
```
Pet:
```json
{
    "url_to_image": "https://myphotosmo.s3.amazonaws.com/cachorro.jpg",
    "created_image": "14-10-2024 09:36:20",
    "pets": [
        {
            "labels": [
                {
                    "Confidence": 99.0054931640625,
                    "Name": "Animal"
                },
                {
                    "Confidence": 99.0054931640625,
                    "Name": "Dog"
                },
                {
                    "Confidence": 99.0054931640625,
                    "Name": "Pet"
                },
                {
                    "Confidence": 92.6964111328125,
                    "Name": "Hound"
                }
            ],
            "Dicas": "1. N√≠vel de energia: A ra√ßa √© ativa e gosta de atividades f√≠sicas, como passeios, corridas e jogos. Tamb√©m gosta de atividades mentais, como treinamentos e atividades cognitivas. 2. Necessidades di√°rias de exerc√≠cio f√≠sico: Recomenda-se pelo menos duas caminhadas di√°rias de 30 minutos cada, al√©m de jogos e brincadeiras.
            3. Temperamento: √â uma ra√ßa amig√°vel com crian√ßas e outros animais, mas pode ser possessiva com alimentos. Recomenda-se socializa√ß√£o desde cedo.
            4. Necessidades especiais de cuidados: Recomenda-se banho regular, escova√ß√£o dos dentes e cuidados com as unhas. Tamb√©m √© necess√°rio fornecer comida de qualidade e suplementos para a pele e o pelo.
            5. Problemas de sa√∫de comuns: S√£o ra√ßas propensas a problemas de sa√∫de como obesidade, problemas oculares e problemas de coluna. Recomenda-se avalia√ß√µes regulares com¬†o¬†veterin√°rio."
 ¬†¬†¬†¬†¬†¬†¬†}
¬†¬†¬†¬†]
}
```
Emo√ß√£o + pet:
```json

{
    "url_to_image": "https://myphotosmo.s3.amazonaws.com/pessoa-pet2.jpg",
    "created_image": "14-10-2024 09:45:22",
    "faces": [
        {
            "position": {
                "Height": 0.23378419876098633,
                "Left": 0.3006735146045685,
                "Top": 0.15228010714054108,
                "Width": 0.1119609847664833
            },
            "classified_emotion": "HAPPY",
            "classified_emotion_confidence": 100.0
        }
    ],
    "pets": [
        {
            "labels": [
                {
                    "Confidence": 98.90979766845703,
                    "Name": "Animal"
                },
                {
                    "Confidence": 98.90979766845703,
                    "Name": "Dog"
                },
                {
                    "Confidence": 98.90979766845703,
                    "Name": "Pet"
                },
                {
                    "Confidence": 96.54975891113281,
                    "Name": "Golden Retriever"
                }
            ],
            "Dicas": "1. N√≠vel de energia: A ra√ßa √© ativa e gosta de atividades f√≠sicas, como passeios, corridas e jogos. Tamb√©m gosta de atividades mentais, como treinamentos e atividades cognitivas. 2. Necessidades di√°rias de exerc√≠cio f√≠sico: Recomenda-se pelo menos duas caminhadas di√°rias de 30 minutos cada, al√©m de jogos e brincadeiras.
            3. Temperamento: √â uma ra√ßa amig√°vel com crian√ßas e outros animais, mas pode ser possessiva com alimentos. Recomenda-se socializa√ß√£o desde cedo.
            4. Necessidades especiais de cuidados: Recomenda-se banho regular, escova√ß√£o dos dentes e cuidados com as unhas. Tamb√©m √© necess√°rio fornecer comida de qualidade e suplementos para a pele e o pelo.
            5. Problemas de sa√∫de comuns: S√£o ra√ßas propensas a problemas de sa√∫de como obesidade, problemas oculares e problemas de coluna. Recomenda-se avalia√ß√µes regulares com¬†o¬†veterin√°rio."
 ¬†¬†¬†¬†¬†¬†¬†}
¬†¬†¬†¬†]
}
```

## üìÇ  Estrutura do Projeto:

### Estrutura de Diret√≥rios:

A estrutura do projeto √© organizada da seguinte maneira:
```
sprints-8-pb-aws-junho/                             # Diret√≥rio principal do projeto Sprint 8 PB AWS - Junho
‚îÇ
‚îú‚îÄ‚îÄ assets/                                         # Cont√©m arquivos de m√≠dia e recursos visuais do projeto
‚îÇ   ‚îú‚îÄ‚îÄ arquitetura-base.jpeg                       # Imagem da arquitetura base do sistema
‚îÇ
‚îú‚îÄ‚îÄ development/                                    # Diret√≥rio de desenvolvimento com collectoins e scripts
‚îÇ   ‚îú‚îÄ‚îÄ collections/                                # Cont√©m collectoins postman
‚îÇ         ‚îî‚îÄ‚îÄ sprint-8-pb-aws-junho.json            # Cole√ß√£o Postman espec√≠fica da sprint
‚îÇ   ‚îú‚îÄ‚îÄ taskpy/                                     # Scripts automatizados para tarefas relacionadas ao desenvolvimento
‚îÇ
‚îú‚îÄ‚îÄ visao-computacional/                            # M√≥dulo de vis√£o computacional do projeto
‚îÇ     ‚îú‚îÄ‚îÄ api/                                      # Cont√©m todas as vers√µes da API
‚îÇ         ‚îú‚îÄ‚îÄ v1/                                   # API vers√£o 1
‚îÇ             ‚îú‚îÄ‚îÄ handlers/                         # Handlers para lidar com requisi√ß√µes da API v1
‚îÇ         ‚îú‚îÄ‚îÄ v2/                                   # API vers√£o 2
‚îÇ             ‚îú‚îÄ‚îÄ handlers/                         # Handlers para lidar com requisi√ß√µes da API v2
‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ aplication/                               # L√≥gica de aplica√ß√£o para o m√≥dulo de vis√£o computacional
‚îÇ         ‚îú‚îÄ‚îÄ contrib/                              # Cont√©m c√≥digo reaproveitado no projeto inteiro e exce√ß√µes customizadas
|         ‚îú‚îÄ‚îÄ core/                                 # Configura√ß√µes do projeto e vari√°veis de ambiente
‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ infrastructure/                           # Arquivos relacionados √† infraestrutura do sistema
‚îÇ         ‚îú‚îÄ‚îÄ aws/                                  # C√≥digo dos servi√ßos da AWS utilizados
‚îÇ         ‚îú‚îÄ‚îÄ schemas/                              # Schemas dos dados de entrada dos endpoints
‚îÇ
‚îú‚îÄ‚îÄ .gitignore                                      # Arquivo para ignorar arquivos e diret√≥rios no controle de vers√£o
‚îú‚îÄ‚îÄ .pre-commit-config.yaml                         # Configura√ß√µes do pre-commit para valida√ß√µes autom√°ticas antes dos commits
‚îú‚îÄ‚îÄ pyproject.toml                                  # Arquivo de configura√ß√£o de depend√™ncias e ferramentas para o projeto Python
‚îú‚îÄ‚îÄ nodemon.json                                    # Configura√ß√µes do Nodemon para monitoramento e rein√≠cio autom√°tico do servidor
‚îú‚îÄ‚îÄ package.json                                    # Depend√™ncias do projeto e scripts do Node.js
‚îú‚îÄ‚îÄ requirements.txt                                # Depend√™ncias Python necess√°rias para o projeto
‚îî‚îÄ‚îÄ README.md                                       # Arquivo de instru√ß√µes e documenta√ß√£o do projeto
```
## üòµ‚Äçüí´ Dificuldades Encontradas:

- **Labels do rekoginition**: Dificuldades em entender e ajustar as labels de ra√ßas para retornar a resposta pedida de forma correta.

## Licen√ßa:
Este projeto est√° licenciado sob a [MIT License](LICENSE).



## üåê Equipe:
üßë üíª Este projeto foi desenvolvido por:</br>
| [<img loading="lazy" src="https://avatars.githubusercontent.com/u/97261564?v=4" width=115><br><sub>Gustavo Felipe</sub>](https://github.com/gusttavofelipe) |  [<img loading="lazy" src="https://avatars.githubusercontent.com/u/167718668?v=4" width=115><br><sub>Jean Carlos</sub>](https://github.com/JeanPTBR) |  [<img loading="lazy" src="https://avatars.githubusercontent.com/u/25685390?v=4" width=115><br><sub>John Sousa</sub>](https://github.com/johnSousa23)  |  [<img loading="lazy" src="https://avatars.githubusercontent.com/u/173844663?v=4" width=115><br><sub>Moniza Oliveira</sub>](https://github.com/MONIZA-OLIVEIRA) |
| :---: | :---: | :---: | :---: |
